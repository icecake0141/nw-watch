# Network Watch Configuration Example

# Core intervals and history
interval_seconds: 5              # Command execution interval
ping_interval_seconds: 1         # Ping interval
ping_window_seconds: 60          # Window (seconds) for ping tiles
history_size: 10                 # Max runs per device/command to keep
max_output_lines: 500            # Truncate outputs after filtering

# Collector settings (optional)
collector:
  max_workers: 20                # Max ThreadPoolExecutor workers (default: 20)

# WebSocket settings (optional)
websocket:
  enabled: false                 # Enable WebSocket for real-time updates (default: false)
  # ping_interval: 20            # WebSocket ping interval in seconds (optional, default: 20)

# SSH connection settings (optional)
ssh:
  persistent_connections: true   # Use persistent SSH connections (default: true)
  connection_timeout: 100        # SSH connection timeout in seconds (default: 100)
  max_reconnect_attempts: 3      # Maximum reconnection attempts (default: 3)
  reconnect_backoff_base: 1.0    # Base time for exponential backoff in seconds (default: 1.0)

# Global filters applied to every command (unless command override exists)
global_filters:
  line_exclude_substrings:
    - "Temperature"
    - "Last input"
  # Mark entire run as filtered (hidden from UI) if substring exists
  output_exclude_substrings:
    - "% Invalid"
    - "% Ambiguous"

# Commands are defined once and executed against each device
commands:
  - name: "show_version"
    command_text: "show version"
    sort_order: 1
    interval_seconds: 30  # Optional: execution interval in seconds (5-60). If omitted, uses global interval_seconds
    filters:
      line_exclude_substrings:
        - "uptime"
  - name: "interfaces_status"
    command_text: "show interfaces status"
    sort_order: 2
    interval_seconds: 15  # Optional: run every 15 seconds
  - name: "ip_int_brief"
    command_text: "show ip interface brief"
    sort_order: 3
    # No interval_seconds specified - uses global interval_seconds

# Devices to monitor
devices:
  - name: "DeviceA"
    host: "192.168.1.1"
    port: 22
    username: "admin"
    password_env_key: "DEVICEA_PASSWORD"  # Read password from environment
    device_type: "cisco_ios"              # netmiko device type
    ping_host: "192.168.1.1"

  - name: "DeviceB"
    host: "192.168.1.2"
    port: 22
    username: "admin"
    password_env_key: "DEVICEB_PASSWORD"
    device_type: "cisco_ios"
    ping_host: "192.168.1.2"
